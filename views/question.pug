extends layout.pug

block content
  d.page_content
    .content
    .main
      h1 #{question.title}
      div#question
        h3.question-content= content
        div.question-info-content
            div.question-info
                a Asked by: #{question.User.displayName}
                a Asked on: #{(question.updatedAt).toString().split(' ').slice(0,4).join(' ')}
            div.question-button
              if locals.user
                if locals.authenticated
                  if locals.user.id === question.userId
                    form(action=`/questions/${question.id}/delete` method='post')
                      button.delete-button Delete
      div.answer-container
        if answers
          each answer in answers
              h3.answer-content= answer.content
              div.answer-info-content
                div.answer-info
                  a Answered by: #{answer.User.displayName}
                  a Posted on #{(answer.createdAt).toString().split(' ').slice(0,4).join(' ')}
                  div.answer-button
                    if answer.userId == user.id
                      form(action=`/answers/${answer.id}/delete` method="POST")
                        button.delete-button Delete
    if user
      form.answer-form(action=`/questions/${question.id}/answers`, method='post')
        input(type='hidden',name='_csrf',value=csrfToken)
        p.body Your Answer
        textarea.form-box(style='resize: none',name ='answerContents')
        button.submit-button(name='submitAnswer') Submit Answer
